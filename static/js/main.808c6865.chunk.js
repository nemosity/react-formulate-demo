(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{125:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(a(93)),r=o(a(221)),l=a(99),i=a(58);function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,a){var o={},u=Object.assign({},t);return function e(a,c){var d=function(e,t){return(0,r.default)(o,(0,i.joinPath)(e,c),t)},s=function(e){return(0,n.default)(t,(0,i.joinPath)(e,c))};if(Array.isArray(a))return a.map(function(t){return e(t,c)});if(a.groupId)return a.elements.map(function(t){return e(t,c)});if(a.showIf&&s(a.showIf.id)!==a.showIf.value)return u=(0,l.unset)((0,i.joinPath)(a.id,c),u),null;if(a.elements){var f=s(a.id);return Array.isArray(f)&&f.map(function(t,n){return e(a.elements,(0,i.joinPath)((0,i.addIndex)(a.id,n),c))}),null}if(a.validation){if(a.validation.required&&!s(a.id))return d(a.id,"This field is required");if(a.validation.minLength&&s(a.id).length<a.validation.minLength)return d(a.id,"Failed to meet minimum length of ".concat(a.validation.minLength," characters"));if(a.validation.maxLength&&s(a.id).length>a.validation.maxLength)return d(a.id,"Please limit input to ".concat(a.validation.maxLength," characters"));if(a.validation.pattern&&!new RegExp(a.validation.pattern).test(s(a.id)))return d(a.id,"Failed to match regex ".concat(a.validation.pattern))}}(e,a),{errors:Object.keys(o).length>0?o:null,cleanInput:u}}},133:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},138:function(e){e.exports={config:{paginated:!1,inlineValidation:!1},schema:[{groupId:"our-driver-details",label:"Your details",elements:[{id:"driver.first-name",widget:"Input",placeholder:"",label:"First name",validation:{required:!0}},{id:"driver.last-name",widget:"Input",placeholder:"",label:"Last name",validation:{required:!0}},{id:"at-fault",widget:"Radio",placeholder:"",values:[{label:"Me",value:"me"},{label:"Someone else",value:"tp"},{label:"Not sure",value:"unknown"}],label:"Who was at fault?"},{id:"accident-description",widget:"Textarea",placeholder:"Tell us what happened...",label:"What happened?"}]},{groupId:"other-driver-details",elements:[{id:"other-driver.name",widget:"Input",placeholder:"",label:"Driver name"},{id:"accident-description",widget:"Textarea",placeholder:"Damage to their vehicle",label:"Describe the damage to "}],label:"Other driver details"}]}},139:function(e){e.exports={config:{paginated:!0,inlineValidation:!0},schema:[{pageId:"Incident Type",content:{groupId:"our-driver-details",label:"What best describes your incident?",elements:[{id:"incident.type",widget:"Radio",validation:{required:!0},values:[{label:"Accident",value:"accident"},{label:"Fire",value:"fire"},{label:"Theft",value:"theft"}],label:{text:"label.incidentType",params:{type:"incident.type"}}}]}},{pageId:"Incident Date",content:{groupId:"our-driver-details",label:"When did the incident occur?",elements:[{id:"incident.date",widget:"Datepicker",placeholder:"",label:"",validation:{required:!0}}]}},{pageId:"Your details",showIf:{id:"incident.type",value:"accident"},content:{groupId:"our-driver-details",label:"About the incident",elements:[{id:"accident-description",widget:"Textarea",placeholder:"E.g. I was parallel parking outside work and backed into a lamp post",label:"Tell us what happened",validation:{required:!0}}]}},{pageId:"Your details",showIf:{id:"incident.type",value:"theft"},content:{groupId:"our-driver-details",label:"About the theft",elements:[{id:"vehicle-recovered",widget:"Radio",placeholder:"",values:[{label:"Yes",value:"yes"},{label:"No",value:"no"}],label:"Has the vehicle been found?",validation:{required:!0}},{id:"vehicle-recovered-by",widget:"Input",label:"Who found the vehicle?",validation:{required:!0},showIf:{id:"vehicle-recovered",value:"yes"}}]}},{pageId:"About the incident",content:{groupId:"other-driver-details",elements:[{id:"tp-involed",widget:"Radio",placeholder:"",values:[{label:"Yes",value:"yes"},{label:"No",value:"no"}],label:"Was another vehicle involved?",validation:{required:!0}},{id:"other-drivers",widget:"Repeater",label:"Please add other drivers involved",showIf:{id:"tp-involed",value:"yes"},properties:{name:"Other driver",minRepeats:1,maxRepeats:3},elements:[{id:"name",widget:"Input",placeholder:"",label:"Driver name",validation:{required:!0,pattern:"^[A-Za-z\\s]+$"}},{id:"insured",widget:"Dropdown",placeholder:"",label:"Who is the third party insured with?",validation:{required:!0},properties:{src:"/refData.json"}},{id:"damaged",widget:"Radio",placeholder:"",validation:{required:!0},values:[{label:"Yes",value:"yes"},{label:"No",value:"no"}],label:"Was their car damaged?"},{id:"damage-description",widget:"Input",placeholder:"E.g. small dent to left bumper",label:"What was damaged?",validation:{required:!0},showIf:{id:"damaged",value:"yes"}},{id:"passengers",widget:"Repeater",label:"Please add passengers that were in the vehicle",properties:{name:"Passenger",minRepeats:0,maxRepeats:3},elements:[{id:"name",widget:"Input",placeholder:"",label:"Passenger",validation:{required:!0,pattern:"^[A-Za-z\\s]+$"}}]}]}],label:"Other driver details"}},{pageId:"Your details",showIf:{id:"tp-involed",value:"yes"},content:{groupId:"at-fault-details",label:"Responsibility",elements:[{id:"at-fault",widget:"Radio",values:[{label:"Me",value:"me"},{ref:"other-drivers",label:"name",value:"$path"},{label:"Someone else",value:"tp"},{label:"Not sure",value:"unknown"}],label:"Who was at fault?",validation:{required:!0}}]}},{pageId:"Contact Details",content:{groupId:"other-driver-details",elements:[{id:"main-contact.preferred-method",widget:"Radio",placeholder:"",values:[{label:"Call",value:"phone"},{label:"Text (SMS)",value:"sms"},{label:"Email",value:"email"}],label:"What's your preferred way for us to contact you?"},{id:"main-contact.phone",widget:"Input",placeholder:"",label:"Phone",showIf:{id:"main-contact.preferred-method",value:"phone"},validation:{required:!0,pattern:"^([(]?(0|\\+64)((2[0-9]?)|3|4|6|7|8|9)[)]?)[-\\s0-9]*$"}},{id:"main-contact.mobile",widget:"Input",placeholder:"",label:"Mobile",showIf:{id:"main-contact.preferred-method",value:"sms"},validation:{required:!0,pattern:"^02[-\\s0-9]*$",minLength:9,maxLength:12}},{id:"main-contact.email",widget:"Input",placeholder:"",label:"Email",showIf:{id:"main-contact.preferred-method",value:"email"},validation:{required:!0,pattern:"^[&_A-Za-z0-9-'+?]+(\\.[&_A-Za-z0-9-'+?]+)*@[&A-Za-z0-9-]+(\\.[&A-Za-z0-9-]+)*(\\.[&_A-Za-z0-9-]+)$"}}],label:"Contact details"}},{pageId:"claim-complete",content:{groupId:"other-driver-details",elements:[],label:"Thanks, we've recieved your claim!"}}]}},140:function(e){e.exports={config:{paginated:!0,inlineValidation:!0},schema:[{pageId:"Incident Type",content:{groupId:"our-driver-details",label:"What best describes your incident?",elements:[{id:"incident.type",widget:"Radio",validation:{required:!0},values:[{label:"Accident",value:"accident"},{label:"Fire",value:"fire"},{label:"Theft",value:"theft"}],label:{text:"label.incidentType",params:{type:"incident.type"}}}]}},{pageId:"Incident Date",content:{groupId:"our-driver-details",label:"When did the incident occur?",elements:[{id:"incident.date",widget:"Datepicker",placeholder:"",label:"",validation:{required:!0}}]}},{pageId:"Your details",showIf:{id:"incident.type",value:"accident"},content:{groupId:"our-driver-details",label:"About the incident",elements:[{id:"accident-description",widget:"Textarea",placeholder:"E.g. I was parallel parking outside work and backed into a lamp post",label:"Tell us what happened",validation:{required:!0}}]}},{pageId:"Your details",content:{groupId:"our-driver-details",label:"About the theft",elements:[{id:"vehicle-recovered",widget:"Radio",placeholder:"",values:[{label:"Yes",value:"yes"},{label:"No",value:"no"}],label:"Has the vehicle been found?",validation:{required:!0}}]}}]}},155:function(e,t,a){e.exports=a(311)},164:function(e,t,a){},165:function(e,t,a){},175:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(0),r=o(a(92)),l=o(a(93)),i=a(58);function o(e){return e&&e.__esModule?e:{default:e}}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){c(e,t,a[t])})}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function d(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,m(t).apply(this,arguments))}var a,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,n.Component),a=t,(r=[{key:"render",value:function(){var e=this.props,t=e.schema,a=e.data,r=e.onUpdate,o=e.errors,c=e.i18n,f=e.onValidateElement,p=e.basePath,m=e.widgets,v=e.config,b=void 0===v?{}:v,h=function(e){return"object"===s(e)?c(e.text,(t=e.params,Object.keys(t).reduce(function(e,n){return e[n]=(0,l.default)(a,t[n]),e},{}))):e;var t};return function e(t,c){var s=function(e){return(0,i.joinPath)(e,c)};return Array.isArray(t)?n.createElement.apply(void 0,[n.Fragment,null].concat(d(t.map(function(t){return e(t,c)})))):t.groupId?(0,n.createElement)(n.Fragment,null,(0,n.createElement)("h4",null,t.label),e(t.elements,c)):"Repeater"===t.widget?t.showIf&&(0,l.default)(a,s(t.showIf.id))!==t.showIf.value?null:(0,n.createElement)(m[t.widget],u({},t.properties,{id:s(t.id),error:(0,l.default)(o,s(t.id)),value:(0,l.default)(a,s(t.id),t.defaultValue||""),placeholder:t.placeholder,label:h(t.label),onChange:function(e){return r(s(t.id),e)},elements:t.elements,path:s(t.id),processNode:e,button:m.Button})):!m[t.widget]||t.showIf&&(0,l.default)(a,s(t.showIf.id))!==t.showIf.value?null:(0,n.createElement)(m[t.widget],u({},t.properties,{id:s(t.id),error:(0,l.default)(o,s(t.id)),value:(0,l.default)(a,s(t.id),t.defaultValue||""),placeholder:t.placeholder,label:h(t.label),onChange:function(e){r(s(t.id),e),b.inlineValidation&&!t.elements&&(0,l.default)(o,s(t.id))&&f(t,c)},onBlur:function(){b.inlineValidation&&f(t,c)},values:t.values&&t.values.reduce(function(e,t){if(t.ref){var n=(0,l.default)(a,t.ref);Array.isArray(n)?n.map(function(a,n){return(0,l.default)(a,t.label)&&e.push({label:(0,l.default)(a,t.label),value:(0,i.addIndex)(t.ref,n)})}):(0,l.default)(n,t.value)&&e.push({label:(0,l.default)(n,t.label),value:(0,l.default)(n,t.value)})}else e.push(t);return e},[])}))}(t,p)}}])&&f(a.prototype,r),o&&f(a,o),t}();b.propTypes={schema:r.default.oneOfType([r.default.shape({id:r.default.string}),r.default.shape({groupId:r.default.string}),r.default.shape({id:r.default.string}),r.default.arrayOf(r.default.oneOfType([r.default.shape({id:r.default.string}),r.default.shape({groupId:r.default.string}),r.default.shape({id:r.default.string})]).isRequired)]).isRequired,data:function(e){var t=0;return e.data&&(t+=1),t&&5!==t?new Error("Must provide all props"):null},onUpdate:r.default.func,errors:r.default.objectOf(r.default.string),i18n:r.default.func,onValidateElement:r.default.func,basePath:r.default.string,widgets:r.default.objectOf(r.default.elementType).isRequired,config:r.default.shape({inlineValidation:r.default.bool})},b.defaultProps={data:null,onUpdate:function(){},onValidateElement:function(){},i18n:function(e){return e},config:{},basePath:null,errors:{}};var h=b;t.default=h},215:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}(a(0)),r=c(a(92)),l=c(a(93)),i=a(58),o=c(a(216)),u=c(a(125));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){s(e,t,a[t])})}return e}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function f(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(e){return(p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(u){r=!0,l=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var v={errors:null,validateForm:!1,validateNode:null,formComplete:!1,data:{}},b=function(e){var t=e.schema,a=e.onUpdate,r=e.onSubmit,c=e.i18n,s=e.basePath,b=e.widgets,h=e.config,y=void 0===h?{}:h,g=m((0,n.useReducer)(o.default,v),2),E=g[0],O=g[1],A=E.data,w=E.validateForm,I=E.validateNode,j=E.errors;(0,n.useEffect)(function(){if(w){var e=(0,u.default)(t,A);e.errors?O({type:"VALIDATE_FORM_FAIL",payload:e.errors}):(O({type:"VALIDATE_FORM_SUCCESS",payload:e.cleanInput}),r(e.cleanInput))}},[w]),(0,n.useEffect)(function(){if(I){var e=m(I,2),t=e[0],a=e[1],n=(0,u.default)(t,A);n.errors?O({type:"VALIDATE_ELEMENT_FAIL",payload:n.errors}):O({type:"VALIDATE_ELEMENT_SUCCESS",payload:a})}},[I]);var T=function(e){return"object"===p(e)?c(e.text,(t=e.params,void Object.keys(t).reduce(function(e,a){return e[a]=(0,l.default)(A,t[a]),e},{}))):e;var t};return n.default.createElement(n.Fragment,null,function e(t,r){var o=function(e){return(0,i.joinPath)(e,r)};return Array.isArray(t)?n.createElement.apply(void 0,[n.Fragment,null].concat(f(t.map(function(t){return e(t,r)})))):t.groupId?(0,n.createElement)(n.Fragment,null,(0,n.createElement)("h4",null,t.label),e(t.elements,r)):"Repeater"===t.widget?t.showIf&&(0,l.default)(A,o(t.showIf.id))!==t.showIf.value?null:(0,n.createElement)(b[t.widget],d({},t.properties,{id:o(t.id),error:(0,l.default)(j,o(t.id)),value:(0,l.default)(A,o(t.id),t.defaultValue||""),placeholder:t.placeholder,label:T(t.label),onChange:function(e){return a(o(t.id),e)},elements:t.elements,path:o(t.id),processNode:e,button:b.Button})):!b[t.widget]||t.showIf&&(0,l.default)(A,o(t.showIf.id))!==t.showIf.value?null:(0,n.createElement)(b[t.widget],d({},t.properties,{id:o(t.id),error:(0,l.default)(j,o(t.id)),value:(0,l.default)(A,o(t.id),t.defaultValue||""),placeholder:t.placeholder,label:T(t.label),onChange:function(e){y.inlineValidation&&!t.elements&&(0,l.default)(j,o(t.id))?O({type:"UPDATE_INPUT_AND_VALIDATE_ELEMENT",payload:[e,o(t.id),t]}):O({type:"UPDATE_INPUT",payload:[e,o(t.id)]})},onBlur:function(){y.inlineValidation&&O({type:"VALIDATE_ELEMENT",payload:[t,r]})},values:t.values&&t.values.reduce(function(e,t){if(t.ref){var a=(0,l.default)(A,t.ref);Array.isArray(a)?a.map(function(a,n){return(0,l.default)(a,t.label)&&e.push({label:(0,l.default)(a,t.label),value:(0,i.addIndex)(t.ref,n)})}):(0,l.default)(a,t.value)&&e.push({label:(0,l.default)(a,t.label),value:(0,l.default)(a,t.value)})}else e.push(t);return e},[])}))}(t,s),(0,n.createElement)(b.Button,{onClick:function(){O({type:"VALIDATE_FORM"})},label:"Submit"}))};b.propTypes={schema:r.default.oneOfType([r.default.shape({id:r.default.string}),r.default.shape({groupId:r.default.string}),r.default.shape({id:r.default.string}),r.default.arrayOf(r.default.oneOfType([r.default.shape({id:r.default.string}),r.default.shape({groupId:r.default.string}),r.default.shape({id:r.default.string})]).isRequired)]).isRequired,data:r.default.oneOfType([r.default.objectOf(r.default.string)]).isRequired,onUpdate:r.default.func,onSubmit:r.default.func.isRequired,errors:r.default.objectOf(r.default.string),i18n:r.default.func,onValidateElement:r.default.func,basePath:r.default.string,widgets:r.default.objectOf(r.default.elementType).isRequired,config:r.default.shape({inlineValidation:r.default.bool})},b.defaultProps={onUpdate:function(){},onValidateElement:function(){},i18n:function(e){return e},config:{},basePath:null,errors:{}};var h=b;t.default=h},216:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(99);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(u){r=!0,l=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){i(e,t,a[t])})}return e}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var o=function(e,t){var a=t.type,i=t.payload;switch(a){case"FORM_RESET":return l({},i);case"UPDATE_INPUT":var o=r(i,2),u=o[0],c=o[1];return(0,n.flow)((0,n.set)("data.".concat(c),u))(e);case"UPDATE_INPUT_AND_VALIDATE_ELEMENT":var d=r(i,3),s=d[0],f=d[1],p=d[2];return(0,n.flow)((0,n.set)("data.".concat(f),s),(0,n.set)("validateNode",[p,f]))(e);case"VALIDATE_FORM":return(0,n.flow)((0,n.set)("validateForm",!0))(e);case"VALIDATE_FORM_FAIL":return l({},e,{validateForm:!1,errors:i});case"VALIDATE_FORM_SUCCESS":return(0,n.flow)((0,n.set)("data",i),(0,n.set)("errors",null),(0,n.set)("validateForm",!1),(0,n.set)("formComplete",!0))(e);case"VALIDATE_ELEMENT":var m=r(i,2),v=m[0],b=m[1];return(0,n.flow)((0,n.set)("validateNode",[v,b]))(e);case"VALIDATE_ELEMENT_FAIL":return l({},e,{validateNode:null,errors:(0,n.merge)(e.errors,i)});case"VALIDATE_ELEMENT_SUCCESS":return(0,n.flow)((0,n.unset)("errors.".concat(i)),(0,n.set)("validateNode",null))(e);default:return e}};t.default=o},226:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};n.get||n.set?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,t}(a(0)),r=u(a(92)),l=a(99),i=u(a(227)),o=a(58);function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(){var e,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,(e=!(n=f(t).call(this))||"object"!==c(n)&&"function"!==typeof n?p(a):n).addItem=e.addItem.bind(p(e)),e.canRemoveItem=e.canRemoveItem.bind(p(e)),e.canAddItem=e.canAddItem.bind(p(e)),e}var a,r,u;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,n.Component),a=t,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.value,a=e.minRepeats,n=e.onChange;!Array.isArray(t)&&a&&n((0,i.default)(Array(a),{}))}},{key:"addItem",value:function(){var e=this.props,t=e.onChange,a=e.value;t([].concat(d(Array.isArray(a)?a:[]),[{}]))}},{key:"canAddItem",value:function(){var e=this.props,t=e.maxRepeats,a=e.value;return t&&Array.isArray(a)&&a.length>=t}},{key:"canRemoveItem",value:function(){var e=this.props,t=e.minRepeats,a=e.value;return!!(t&&Array.isArray(a)&&a.length<=t)}},{key:"removeItem",value:function(e){var t=this.props,a=t.onChange,n=t.value;a((0,l.pullAt)(e,n))}},{key:"renderItems",value:function(){var e=this,t=this.props,a=t.value,r=t.name,l=t.button,i=t.path,u=t.processNode,c=t.elements;return Array.isArray(a)?a.map(function(t,a){return n.default.createElement("div",{key:a,className:"repeater-item"},n.default.createElement("span",{className:"remove"},(0,n.createElement)(l,{onClick:function(){return e.removeItem(a)},disabled:e.canRemoveItem(),label:"Remove",className:"dynamic-form__remove"})),n.default.createElement("h3",null,"".concat(r," ").concat(a+1)),u(c,(0,o.addIndex)(i,a)))}):null}},{key:"render",value:function(){var e=this.props,t=e.button,a=e.label,r=e.name;return n.default.createElement("div",null,n.default.createElement("label",{className:"dynamic-form__label"},a),n.default.createElement("div",{className:"repeater-group"},this.renderItems(),(0,n.createElement)(t,{onClick:this.addItem,disabled:this.canAddItem(),label:"Add ".concat(r),className:"dynamic-form__add"})))}}])&&s(a.prototype,r),u&&s(a,u),t}();v.propTypes={value:r.default.arrayOf(r.default.object),minRepeats:r.default.number,maxRepeats:r.default.number.isRequired,onChange:r.default.func.isRequired,label:r.default.string.isRequired,name:r.default.string.isRequired,button:r.default.elementType.isRequired,path:r.default.string.isRequired,processNode:r.default.func.isRequired,elements:r.default.oneOfType([r.default.shape({id:r.default.string}),r.default.shape({groupId:r.default.string}),r.default.shape({id:r.default.string}),r.default.arrayOf(r.default.oneOfType([r.default.shape({id:r.default.string}),r.default.shape({groupId:r.default.string}),r.default.shape({id:r.default.string})]).isRequired)]).isRequired},v.defaultProps={value:"",minRepeats:0};var b=v;t.default=b},311:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(53),i=a(14),o=a.n(i),u=(a(164),a(72)),c=a(73),d=a(84),s=a(74),f=a(85),p=a(133),m=a.n(p),v=(a(165),a(134)),b=a.n(v),h=a(371),y={SCHEMA:{ERROR:"SCHEMA.ERROR",LOAD:"SCHEMA.LOAD",UPDATE:"SCHEMA.UPDATE"},FORM:{CLEAN:"FORM.CLEAN",CLEAR:"FORM.CLEAR",MOVE_NEXT:"FORM.MOVE_NEXT",MOVE_BACK:"FORM.MOVE_BACK",SUBMIT:"FORM.SUBMIT",UPDATE:{INPUT:"FORM.UPDATE.INPUT",STEP:"FORM.UPDATE.STEP"},VALIDATE:"FORM.VALIDATE",VALIDATE_ELEMENT:"FORM.VALIDATE_ELEMENT",VALIDATE_ELEMENT_FAIL:"FORM.VALIDATE_ELEMENT_FAIL",VALIDATE_ELEMENT_SUCCESS:"FORM.VALIDATE_ELEMENT_SUCCESS",VALIDATE_FAIL:"FORM.VALIDATE_FAIL"}},g=Object(h.a)(y.FORM.CLEAR),E=Object(h.a)(y.FORM.UPDATE.INPUT),O=(Object(h.a)(y.FORM.UPDATE.STEP),Object(h.a)(y.FORM.MOVE_BACK)),A=Object(h.a)(y.FORM.SUBMIT),w=Object(h.a)(y.FORM.VALIDATE),I=Object(h.a)(y.FORM.VALIDATE_ELEMENT),j=a(33),T=a(355),S=a(374),_=a(358),R=a(370),M=Object(T.a)(function(e){return{root:{width:"100%"},backButton:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}),P=function(e){var t=e.steps,a=e.activeStep,n=M();return r.a.createElement("div",{className:n.root},r.a.createElement(S.a,{activeStep:a,alternativeLabel:!0},t.map(function(e){return r.a.createElement(_.a,{key:e},r.a.createElement(R.a,null,e))})))},N=a(30),L=a(83),D=a(110),F=a(145),C=a(359),k=function(e){return r.a.createElement("span",{className:"u-mar--2 u-align-items--center u-justify-content--center"},r.a.createElement(C.a,Object.assign({variant:"contained",color:"secondary"},e),e.label||e.children))},x=a(143),V=a(109),U=function(e){return r.a.createElement("div",{className:"formElement"},r.a.createElement(V.b,{utils:x.a},r.a.createElement(V.a,{margin:"normal",label:"Date picker",value:e.value||function(){var t=(new Date).toISOString();return e.onChange(t),t}(),onChange:function(t){e.onChange(t)}})))},q=a(368),B=a(364),W=a(362),H=a(363),Y=function(e){return r.a.createElement("div",{className:"formElement"},r.a.createElement(W.a,{error:!!e.error,fullWidth:!0},r.a.createElement(H.a,{component:"legend"},e.label),r.a.createElement(q.a,Object.assign({fullWidth:!0},e,{label:null,onChange:function(t){return e.onChange(t.target.value)},margin:"normal",variant:"outlined"})),e.error&&r.a.createElement(B.a,null,e.error)))},J=a(369),z=a(376),Z=a(365),$=function(e){return r.a.createElement("div",{className:"formElement"},r.a.createElement(W.a,{error:!!e.error,component:"fieldset"},r.a.createElement(H.a,{component:"legend"},e.label),r.a.createElement(z.a,Object.assign({},e,{"aria-label":e.label,name:e.id,onChange:function(t){return e.onChange(t.target.value)}}),e.values.map(function(e,t){return r.a.createElement(Z.a,{key:t,value:e.value,control:r.a.createElement(J.a,null),label:e.label})})),e.error&&r.a.createElement(B.a,null,e.error)))},X=a(361),G=a(366),K=a(375),Q={Button:k,Datepicker:U,Input:Y,Radio:$,Select:function(e){return r.a.createElement("div",{className:"formElement"},r.a.createElement(W.a,{error:!!e.error,className:"selectComponent",fullWidth:!0},r.a.createElement(H.a,{component:"legend"},e.label),r.a.createElement(G.a,Object.assign({fullWidth:!0},e,{label:null,onChange:function(t){return e.onChange(t.target.value)},input:r.a.createElement(X.a,{name:e.name,id:e.id,labelWidth:120})}),e.values.map(function(e,t){return r.a.createElement(K.a,{key:t,value:e.value},e.label)})),e.error&&r.a.createElement(B.a,null,e.error)))},Textarea:function(e){return r.a.createElement("div",{className:"formElement"},r.a.createElement(W.a,{error:!!e.error,className:"Textarea",fullWidth:!0},r.a.createElement(H.a,{component:"legend"},e.label),r.a.createElement(q.a,Object.assign({fullWidth:!0},e,{label:null,onChange:function(t){return e.onChange(t.target.value)},margin:"normal",multiline:!0,rows:5,variant:"outlined"})),e.error&&r.a.createElement(B.a,null,e.error)))}},ee=function(e){var t=e.src,a=Object(F.a)(e,["src"]),l=Object(n.useState)([{label:"Loading...",value:""}]),i=Object(D.a)(l,2),o=i[0],u=i[1],c=Object(n.useState)(!0),d=Object(D.a)(c,2),s=d[0],f=d[1];return Object(n.useEffect)(function(){t&&fetch(t).then(function(e){return e.json()}).then(function(e){return setTimeout(function(){u([{label:"Please select",value:""}].concat(Object(L.a)(e))),f(!1)},1e3)}).catch(function(e){return console.log(e)})},[t]),r.a.createElement(Q.Select,Object.assign({},a,{values:o,className:s?"disable-select":null}))},te=Object(N.a)({Repeater:j.Repeater,Dropdown:ee},Q),ae=te.Button,ne=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).renderAlert=function(){return r.a.createElement("div",{id:"successLozenge",icon:"icon__attention",type:a.props.valid?"success":"warning",className:"u-mar-b--3",inline:!0},r.a.createElement("p",null,a.props.valid?"Valid schema":"Enter a valid schema or select a schema to load"))},a}return Object(f.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return this.props.valid?this.props.schema.config.paginated?r.a.createElement("div",{className:"form-container"},r.a.createElement(P,{steps:this.props.schema.schema.map(function(e){return e.pageId}),activeStep:this.props.step}),r.a.createElement(b.a,{transitionName:"background",transitionEnterTimeout:700,transitionLeaveTimeout:1},this.props.schema.schema.map(function(t,a){return e.props.step===a?r.a.createElement("div",{className:"form-slide"},r.a.createElement(j.DynamicForm,{schema:t.content,data:e.props.form,onUpdate:e.props.onUpdateForm,errors:e.props.errors,onValidateElement:e.props.onValidateElement,widgets:te,config:e.props.schema.config||{},i18n:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"".concat(e,": ").concat(JSON.stringify(t))}}),r.a.createElement("div",{className:"buttonGroup"},r.a.createElement(ae,{tracking:"eg1",onClick:function(){return e.props.onMoveBack()},variant:"outlined",disabled:e.props.step-1<0},"Back"),r.a.createElement(ae,{name:"eg2",onClick:function(){return e.props.onValidateForm(e.props.step)},primary:!0,disabled:e.props.step+1>e.props.schema.schema.length-1},"Next"))):null}))):r.a.createElement("div",{className:"form-container"},r.a.createElement(j.StatefulDynamicForm,{schema:this.props.schema.schema,data:this.props.form,errors:this.props.errors,onSubmit:this.props.onSubmit,widgets:te,config:this.props.schema.config||{}})):this.renderAlert()}}]),t}(n.Component),re=Object(l.b)(function(e){var t=e.form,a=e.schema;return{errors:t.errors,form:t.input,step:t.step,schema:a.parsedSchema,valid:a.valid}},function(e){return{onUpdateForm:function(t,a){return e(E({path:t,data:a}))},onMoveBack:function(t){return e(O(t))},onValidateForm:function(t){return e(w(t))},onValidateElement:function(t,a){return e(I({schema:t,path:a}))},onSubmit:function(t){return e(A(t))}}})(ne),le=a(138),ie=a(139),oe=a(140),ue=Object(h.a)(y.SCHEMA.UPDATE),ce=Q.Button,de=Q.Textarea,se=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(c.a)(t,[{key:"renderProgressBar",value:function(){var e,t;try{e=JSON.parse(this.props.schema),t=!0}catch(a){t=!1}return t&&e.config.paginated?r.a.createElement("div",{class:"progress rounded-0"},r.a.createElement("div",{class:"progress-bar",role:"progressbar",style:{width:"".concat((this.props.form.step+1)/e.schema.length*100,"%")},"aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"})):null}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-dark bg-dark"},r.a.createElement("a",{className:"navbar-brand",href:"http://nemosity.github.io"},r.a.createElement("img",{src:m.a,width:"40",height:"40",className:"d-inline-block align-top App-logo",alt:"logo"}),r.a.createElement("span",{className:"navbar-brand mb-0 h1"},"React Formulate")),r.a.createElement("span",{className:"navbar-brand mb-0"},"v0.0.1-alpha")),this.renderProgressBar(),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"content-panel"},r.a.createElement("h2",null,"Schema"),r.a.createElement("div",{className:"code"},r.a.createElement(de,{id:"textarea",rows:8,onChange:this.props.onSchemaUpdate,value:this.props.schema})),r.a.createElement("div",{className:"buttonGroup"},r.a.createElement(ce,{tracking:"eg1",onClick:function(){return e.props.onSchemaUpdate({target:{value:JSON.stringify(le,null,4)}})},primary:!0},"Simple"),r.a.createElement(ce,{name:"eg2",onClick:function(){return e.props.onSchemaUpdate({target:{value:JSON.stringify(ie,null,4)}})},primary:!0},"Pagination"),r.a.createElement(ce,{name:"eg3",onClick:function(){return e.props.onSchemaUpdate({target:{value:JSON.stringify(oe,null,4)}})},primary:!0},"Conditionals"))),r.a.createElement("div",{className:"content-panel"},r.a.createElement("div",{className:""},r.a.createElement("h2",null,"Generated Payload")),r.a.createElement("div",{className:"code"},r.a.createElement(de,{id:"formoutput",rows:8,value:JSON.stringify(this.props.form.input,null,4),readonly:!0})),r.a.createElement("div",{className:"buttonGroup"},r.a.createElement(ce,{tracking:"clearForm",onClick:function(){return e.props.onClearForm()},primary:!0},"Reset Form")))),r.a.createElement("div",{className:"col"},r.a.createElement("div",null,r.a.createElement("h2",null,"Dynamic Form")),r.a.createElement("div",{className:"dynamic-form"},r.a.createElement(re,null)))))))}}]),t}(n.Component),fe=Object(l.b)(function(e){return{form:e.form,schema:e.schema.rawSchema}},function(e){return{onSchemaUpdate:function(t){var a=t.target.value;return e(ue(a))},onClearForm:function(){return e(g())}}})(se);a(258),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pe=a(26),me=(a(141),a(144)),ve=a(17),be=a.n(ve),he=a(15),ye=a(142),ge=a.n(ye),Ee=function(e){return e.form.input},Oe=function(e){return e.schema.parsedSchema.schema},Ae=be.a.mark(_e),we=be.a.mark(Re),Ie=be.a.mark(Me),je=be.a.mark(Pe),Te=be.a.mark(Ne),Se=be.a.mark(Le);function _e(e){var t,a,n,r,l,i;return be.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(he.d)(Ee);case 2:return t=o.sent,o.next=5,Object(he.d)(Oe);case 5:if(a=o.sent,!Number.isInteger(e.payload)||!a[e.payload].pageId){o.next=18;break}if(n=a[e.payload].content,r=Object(j.validate)(n,t),l=r.errors,i=r.cleanInput,!l){o.next=14;break}return o.next=12,Object(he.c)({type:y.FORM.VALIDATE_FAIL,payload:l});case 12:o.next=18;break;case 14:return o.next=16,Object(he.c)({type:y.FORM.CLEAN,payload:i});case 16:return o.next=18,Object(he.c)({type:y.FORM.MOVE_NEXT,payload:e.payload});case 18:case"end":return o.stop()}},Ae)}function Re(){return be.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.e)(y.FORM.VALIDATE,_e);case 2:case"end":return e.stop()}},we)}function Me(e){var t,a,n,r,l,i;return be.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(he.d)(Ee);case 2:if(t=o.sent,a=e.payload,n=a.schema,r=a.path,!n.id){o.next=13;break}if(l=Object(j.validate)(n,t,r),!(i=l.errors)){o.next=11;break}return o.next=9,Object(he.c)({type:y.FORM.VALIDATE_ELEMENT_FAIL,payload:i});case 9:o.next=13;break;case 11:return o.next=13,Object(he.c)({type:y.FORM.VALIDATE_ELEMENT_SUCCESS,payload:Object(j.joinPath)(n.id,r)});case 13:case"end":return o.stop()}},Ie)}function Pe(){return be.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.e)(y.FORM.VALIDATE_ELEMENT,Me);case 2:case"end":return e.stop()}},je)}function Ne(e){var t,a,n,r;return be.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Object(he.d)(Ee);case 2:return t=l.sent,l.next=5,Object(he.d)(Oe);case 5:for(a=l.sent,n=e.payload+1,r=function(e){var n=a[e].showIf;return!(!n||ge()(t,n.id)===n.value)};r(n);)n++;return l.next=11,Object(he.c)({type:y.FORM.UPDATE.STEP,payload:n});case 11:case"end":return l.stop()}},Te)}function Le(){return be.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.e)(y.FORM.MOVE_NEXT,Ne);case 2:case"end":return e.stop()}},Se)}var De=be.a.mark(Ce),Fe=be.a.mark(ke);function Ce(e){var t,a;return be.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:try{t=JSON.parse(e.payload),a=!0}catch(r){a=!1}if(!a){n.next=6;break}return n.next=4,Object(he.c)({type:y.SCHEMA.LOAD,payload:t});case 4:n.next=8;break;case 6:return n.next=8,Object(he.c)({type:y.SCHEMA.ERROR});case 8:case"end":return n.stop()}},De)}function ke(){return be.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.e)(y.SCHEMA.UPDATE,Ce);case 2:case"end":return e.stop()}},Fe)}var xe=be.a.mark(Ve);function Ve(){return be.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.a)([Object(he.b)(Re),Object(he.b)(Pe),Object(he.b)(ke),Object(he.b)(Le)]);case 2:case"end":return e.stop()}},xe)}var Ue=a(56),qe={errors:null,input:{},step:0,visitedSteps:[]};var Be={rawSchema:"",parsedSchema:null,valid:null};var We=Object(pe.c)({form:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case y.FORM.CLEAR:return qe;case y.FORM.UPDATE.INPUT:return Object(Ue.set)("input.".concat(n.path),n.data,e);case y.FORM.CLEAN:case y.FORM.SUBMIT:return Object(Ue.set)("input",n,e);case y.FORM.UPDATE.STEP:return Object(N.a)({},e,{step:n,visitedSteps:[].concat(Object(L.a)(e.visitedSteps),[e.step]),errors:null});case y.FORM.MOVE_BACK:return Object(N.a)({},e,{step:e.visitedSteps[e.visitedSteps.length-1],visitedSteps:e.visitedSteps.slice(0,e.visitedSteps.length-1)});case y.FORM.VALIDATE_FAIL:return Object(N.a)({},e,{errors:n});case y.FORM.VALIDATE_ELEMENT_FAIL:return Object(N.a)({},e,{errors:Object(Ue.merge)(e.errors,n)});case y.FORM.VALIDATE_ELEMENT_SUCCESS:return Object(Ue.unset)("errors.".concat(n),e);default:return e}},schema:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case y.SCHEMA.UPDATE:return Object(N.a)({},e,{rawSchema:n});case y.SCHEMA.LOAD:return Object(N.a)({},e,{parsedSchema:n,valid:!0});case y.SCHEMA.ERROR:return Object(N.a)({},e,{valid:!1});default:return e}}}),He=Object(me.a)();var Ye=function(e){var t=[He],a=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||pe.d,n=Object(pe.e)(We,e,a(pe.a.apply(void 0,t)));return He.run(Ve),n}();o.a.render(r.a.createElement(l.a,{store:Ye},r.a.createElement(fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},33:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DynamicForm",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"StatefulDynamicForm",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"Repeater",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"joinPath",{enumerable:!0,get:function(){return o.joinPath}});var n=u(a(175)),r=u(a(215)),l=u(a(226)),i=u(a(125)),o=a(58);function u(e){return e&&e.__esModule?e:{default:e}}},58:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addIndex=t.joinPath=void 0;t.joinPath=function(e,t){return t?t+e:e};t.addIndex=function(e,t){return"".concat(e,"[").concat(t,"]")}}},[[155,1,2]]]);
//# sourceMappingURL=main.808c6865.chunk.js.map